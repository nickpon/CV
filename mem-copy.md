# Задача mem-copy

Число консенсуса для операции `mem-copy(x,y)` равняется бесконечности:

Для алгоритма заведём три массива регистров:
`v[1..n]` - будет хранить значения, предлагаемые потоками
`m1[1..n]` изначально все элементы - единицы
`m2[1..n]` изначально все элементы - нули.

Поток, приходя, записывает своё число в соответствующий регистр `v_i`,  затем выполняет `mem-copy(m1[i], m2[i])`, потом проходится по массиву `m1`, начиная с индекса `i + 1` до конца и обнуляет все регистры. Проходя по массиву `m2` с конца в начало, натыкаясь на первую ненулевую ячейку определяем победителя и извлекаем предложенное им значение из `v_i`.

- Agreement: все потоки вернут одно и то же значение, так как, раз они уж наткнулись на ненулевой элемент в `m2`, то был выполнен некоторый вызов `mem-copy`,  и, поскольку мы уже дошли до этапа выбора победителя, были обнулены все последующие значения в массиве. Очевидно, что этот ненулевой элемент не может быть обнулен в силу построения алгоритма.

- Validity: каждому потоку соответствует своя ячейка в `v`, туда пишет только он, соответственно ячейка, соответствующая победителю - валидный выбор.

- Wait-Free Termination: `O(n)` операций, алгоритм завершится.
