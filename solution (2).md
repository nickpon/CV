## `[tree-stack]` Стек с балансирующим деревом

На лекции мы рассмотрели пример стека с балансирующим деревом, который обеспечивал более слабую (по сравнению с линеаризуемостью) модель согласованности – `quiescent consistency`.

Объясните, как в этом стеке возникает нелинеаризуемое исполнение.

## Решение:

Постараемся объяснить, как в этом стеке возникает нелинеаризуемое исполнение.

Рассмотрим некоторый стек с балансирующим деревом. Пусть у нас есть два потока `T1` и `T2`. Рассмотрим следующий пример исполнения:

```
    T1        T2    
   Push(1)
/*
заснул между какими-то двумя узлами балансирующего дерева
*/
            Push(2)
            Push(3)
/* 
первый поток проснулся, доделал Push(1)
*/
```

После исполнения в первом списке будет лежать `3`, во втором - `2`, в третьем - `1`.

Пусть далее вызовется поочередное удаление всех элементов из данного стека с балансирующим деревом. Вернутся `1`, `2`, `3` => нарушился порядок операций `Push()` => нелинеаризуем.
